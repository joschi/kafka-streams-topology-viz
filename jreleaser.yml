project:
  name: kafka-streams-topology-viz
  description: Library and CLI tool to visualize Kafka Streams topologies in various formats (Mermaid, GraphViz DOT)
  longDescription: |
    Kafka Streams Topology Visualizer is a tool for visualizing Apache Kafka Streams topologies.
    It supports multiple output formats including Mermaid diagrams and GraphViz DOT files, making it easy
    to understand and document your streaming applications.
  links:
    homepage: https://github.com/joschi/kafka-streams-topology-viz
    bugTracker: https://github.com/joschi/kafka-streams-topology-viz/issues
    vcsBrowser: https://github.com/joschi/kafka-streams-topology-viz
  authors:
    - Jochen Schalanda
  license: Apache-2.0
  inceptionYear: "2025"
  stereotype: CLI
  languages:
    java:
      version: "17"
      groupId: com.github.joschi
      artifactId: kafka-streams-topology-viz
      mainClass: com.github.joschi.kafka.topology.cli.TopologyVisualizerCLI

platform:
  replacements:
    aarch_64: aarch64

release:
  github:
    owner: joschi
    overwrite: true
    changelog:
      formatted: ALWAYS
      preset: conventional-commits
      contributors:
        format: '- {{contributorName}}{{#contributorUsernameAsLink}} ({{.}}){{/contributorUsernameAsLink}}'

assemble:
  nativeImage:
    kafka-streams-topology-viz:
      exported: false
      mainJar:
        path: target/{{distributionName}}-{{projectVersion}}-cli.jar
      graalJdks:
        - path: '{{Env.GRAALVM_HOME}}'
          platform: '{{Env.JRELEASER_PLATFORM}}'
      archiving:
        enabled: false
      upx:
        active: RELEASE
        version: '5.0.2'

distributions:
  kafka-streams-topology-viz:
    type: FLAT_BINARY
    artifacts:
      - path: "cli/target/jreleaser/assemble/{{projectName}}/native-image/{{projectName}}-linux-aarch64"
        platform: linux-aarch_64
      - path: "cli/target/jreleaser/assemble/{{projectName}}/native-image/{{projectName}}-linux-x86_64"
        platform: linux-x86_64
      - path: "cli/target/jreleaser/assemble/{{projectName}}/native-image/{{projectName}}-osx-aarch64"
        platform: osx-aarch_64
  kafka-streams-topology-viz-jar:
    type: SINGLE_JAR
    artifacts:
      - path: cli/target/{{projectName}}-{{projectVersion}}.jar

signing:
  active: ALWAYS
  armored: true

deploy:
  maven:
    mavenCentral:
      sonatype:
        active: ALWAYS
        url: https://central.sonatype.com/api/v1/publisher
        applyMavenCentralRules: true
        stagingRepositories:
          - target/staging-deploy
          - lib/target/staging-deploy
